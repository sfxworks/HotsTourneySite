<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <title>Register</title>
  <script src='https://www.google.com/recaptcha/api.js'></script>
 <script>
   function onSubmit(token) {
     document.getElementById("registrationform").submit();
   }
 </script>

  </head>
  <body>
    <nav class="navbar navbar-inverse bg-primary navbar-toggleable-sm mb-4">
      <div class="container">
        <a href="/index.html" class="navbar-brand">Hots Tourneys</a>
        <div class="navbar-nav mr-auto">
            <a class="nav-item nav-link " href="/index.html">Home</a>
            <a class="nav-item nav-link " href="/members.html">Members</a>
          <a class="nav-item nav-link disabled" href="#">Teams</a>
          <a class="nav-item nav-link disabled" href="#">Tournaments</a>
        </div>
        <form class="form-inline">
            <a class="btn btn-info mr-2" href="/login.html">Login</a>
            <a class="btn btn-warning" href="/register.html">Register</a>
        </form>
      </div>
    </nav>
    <div class="container">
        <div id="argumentAlert" class="alert alert-danger alert-dismissible fade show" style="display:none">
            <button type="button" class="close" data-dismiss="alert">
                <span>&times;</span>
            </button>
            <section>
                <h3 id="alertheader" class="alert-heading"></h3>
                <p id="alertbody"></p>
            </section>
        </div>
        
        <form id="registrationform" method="post" action="https://us-central1-hotstourneys.cloudfunctions.net/register">
            <fieldset class="form-group">
                <legend>Basic Information</legend>

                <div class="form-group">
                    <label class="form-control-label" for="battletag">Email</label>
                    <input class="form-control" required="true" type="email" id="email" placeholder="example@example.com">
                    <label class="form-control-label" for="password">Password</label>
                    <input class="form-control" required="true" type="password" placeholder="Secure Password">
                </div>
            </fieldset> 

            <fieldset class="form-group">
                <legend>Player Information</legend>

                <div class="form-group">
                    <label class="form-control-label" for="battletag">Battle Tag</label>
                    <input class="form-control" required="true" type="text" id="battletag" placeholder="Your Battlenet Username">
                    <label class="form-control-label" for="playerID">Player ID</label>
                    <input class="form-control" required="true" type="number" placeholder="Your Battlenet Player ID">
                    <label class="form-control-label" for="region">Active Region</label>
                    <select class="form-control" id="region">
                        <option value="US">US</option>
                        <option value="EU">EU</option>
                        <option value="KR">KR</option>
                        <option value="CN">CN</option>
                    </select>
                </div>
            </fieldset>
            <button
                class="btn btn-primary g-recaptcha"
                data-sitekey="6LclkD0UAAAAANjy3bXvORBOJXUXTZ_YPhDR9dre"
                data-callback="onSubmit">
                Submit
                </button>
        </form>
      </div>
        <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
        <script src="js/tether.min.js"></script>
        <script src="js/bootstrap.min.js"></script>

        <script type="text/javascript">
            console.log("Test.")
        var failed = location.search.split('failed=')[1] ? location.search.split('failed=')[1] : -1
        if(failed != -1)
        {
            document.getElementById("argumentAlert").style.display="";
            
            switch(failed)
                {
                    case "0":
                        document.getElementById("alertheader").innerHTML = "Failed Captcha";
                        
                        document.getElementById("alertbody").innerHTML = "Failed to verify against the captcha."
                        break;
                    case "1":
                        document.getElementById("alertheader").innerHTML = "Battletag Exists";
                        
                        document.getElementById("alertbody").innerHTML = "This battletag has already been registered under a different account. If you believe there has been an issue, please contact us."
                        
                        break;
                    default:
                        document.getElementById("alertheader").innerHTML = "Error Completing Registration";
                        
                        document.getElementById("alertbody").innerHTML = unescape(failed);
                        break;
                }
        }
    </script>
  </body>
</html>